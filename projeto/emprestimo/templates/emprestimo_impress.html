<!DOCTYPE html>
<html charset="UTF-8">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.min.js"></script>

	

{% load widget_tweaks %}

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="robots" content="noindex">
    <style>
        body {
            font-family: "Arial";
        }

        @media print {
            .no-print,
            .no-print * {
                display: none !important;
            }
		}
        .document {
            margin: auto auto;
            width: 216mm;
            height: 108mm;
            background-color: #fff;
        }

        .headerBtn {
            margin: auto auto;
            width: 216mm;
            background-color: #fff;
            display: none;
        }

        table {
            width: 100%;
            position: relative;
            border-collapse: collapse;
        }

        .bankLogo {
            width: 28%;
        }

        .boletoNumber {
            width: 62%;
            font-weight: bold;
        }

        .center {
            text-align: center;
        }

        .right {
            text-align: right;
            right: 20px;
        }

        td {
            position: relative;
        }

        .title {
            position: absolute;
            left: 0px;
            top: 0px;
            font-size: 12px;
			font-weight: bold;			
        }
        .titleisrael {
            position: absolute;
            left: 0px;
            top: 0px;
            font-size: 11px;
            font-weight: normal;
        }
        
        .text {
            font-size: 12px;
        }

        p.content {
            padding: 0px;
            width: 100%;
            margin: 0px;
            font-size: 12px;
        }

        .sideBorders {
            border-left: 1px solid black;
            border-right: 1px solid black;
        }

        hr {
            size: 1;
            border: 1px dashed;
        }

        br {
            content: " ";
            display: block;
            margin: 12px 0;
            line-height: 12px;
        }

        .print {
            /* TODO(dbeam): reconcile this with overlay.css' .default-button. */
            background-color: rgb(77, 144, 254);
            background-image: linear-gradient(to bottom, rgb(77, 144, 254), rgb(71, 135, 237));
            border: 1px solid rgb(48, 121, 237);
            color: #fff;
            text-shadow: 0 1px rgba(0, 0, 0, 0.1);
        }

        .btnDefault {
            font-kerning: none;
            font-weight: bold;
        }

        .btnDefault:not(:focus):not(:disabled) {
            border-color: #808080;
        }

        button {
            border: 1px;
            padding: 5px;
            line-height: 20px;
        }

    
    i[class*=icss-]{position:relative;display:inline-block;font-style:normal;background-color:currentColor;-webkit-box-sizing:border-box;box-sizing:border-box;vertical-align:middle}i[class*=icss-]:after,i[class*=icss-]:before{content:"";border-width:0;position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}i.icss-print{width:.68em;height:1em;border-style:solid;border-color:currentcolor;border-width:.07em;-webkit-border-radius:.05em;border-radius:.05em;background-color:transparent;margin:0 .17em}i.icss-print:before{width:1em;height:.4em;border-width:.07em .21em 0;border-style:solid;border-color:currentColor currentcolor transparent;-webkit-border-radius:.05em .05em 0 0;border-radius:.05em .05em 0 0;top:.25em;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);background-image:-webkit-gradient(linear,left top,left bottom,color-stop(20%,transparent),color-stop(20%,currentcolor),color-stop(60%,currentcolor),color-stop(60%,transparent));background-image:-webkit-linear-gradient(transparent 20%,currentcolor 20%,currentcolor 60%,transparent 60%);background-image:-o-linear-gradient(transparent 20%,currentcolor 20%,currentcolor 60%,transparent 60%);background-image:linear-gradient(transparent 20%,currentcolor 20%,currentcolor 60%,transparent 60%)}i.icss-print:after{width:.45em;height:.065em;background-color:currentColor;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);top:.6em;-webkit-box-shadow:0 .12em,-.1em -.28em 0 .05em;box-shadow:0 .12em,-.1em -.28em 0 .05em}i.icss-files{width:.75em;height:.95em;background-color:transparent;border:.05em solid transparent;border-width:0 .05em .05em 0;-webkit-box-shadow:inset 0 0 0 .065em,.13em .11em 0 -.05em;box-shadow:inset 0 0 0 .065em,.13em .11em 0 -.05em;-webkit-border-radius:0 .3em 0 0;border-radius:0 .3em 0 0;margin:0 .17em .05em .1em}i.icss-files:before{border-style:solid;border-width:.2em;top:.037em;left:.25em;-webkit-border-radius:.1em;border-radius:.1em;border-color:transparent currentColor transparent transparent;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg)}
        </style>

        <script type="text/javascript">
            window.onload = function getUrlParams() {
                var url_string = window.location.href;
                var url = new URL(url_string);
            
                var fmt = url.searchParams.get("fmt");
            
                if(fmt === "html") {
                    document.getElementById("headerBtn").style.display = "block";
                } 
            }
        </script>    
</head>


<!-- <br/>
    <div class="headerBtn" id="headerBtn">
        <div style="text-align:right;">
            <button class="no-print btnDefault print" onclick="window.print()">
                <i class="icss-print"></i>
                <span class="align">&nbspImprimir</span>
            </button>
            <button class="no-print btnDefault print" onclick="window.location>
                <i class="icss-files"></i>
                <span class="align">&nbspGerar PDF</span>
            </button>            
        </div>
    </div>
    <br/> -->

<!-- <h1>Impressão do Emprestimo de {{ object.cliente }}</h1> -->
<!-- <input type="button" class="btn btn-success" value="Imprimir" onclick="imprimir()"><br><br> -->	


<!-- -------------------------------------------------------------------------------------------------- -->
	<!-- Datemodelo1:{{object.data_emprestimo}}<br>Datemodelo2:{{ object.data_emprestimo|date:"d-m-Y" }}<br> -->
	<!-- {{form.data_emprestimo}}<br>
	{% render_field form.data_emprestimo class="form-control" %}<br>
	{{object.data_emprestimo.day }}<br>
	{{object.data_emprestimo.month }}<br>
	{{object.data_emprestimo.year }}<br> -->

	{{object.valor_emprestado}}*2
	
	<br>
<!-- -------------------------------------------------------------------------------------------------- -->

<!-- <div>
	<h2>Estética \/\/\/\/\/\/\/\/\/\/\/</h2>
	{{form.data_emprestimo.label}}<br>

	{{object.data_emprestimo}}<br>
	<h2>Estética /\/\/\/\/\/\/\/\/\/\/\</h2>
	https://docs.djangoproject.com/en/3.0/ref/templates/language/

	sobre variáveis django:
	https://stackoverflow.com/questions/298772/django-template-variables-and-javascript

	cONFIGURAÇÕES DE DATA E HORA DO DJANGO:
	https://ourcodeworld.com/articles/read/555/how-to-format-datetime-objects-in-the-view-and-template-in-django

</div> -->

<!-- FUNÇÃO QUE GERA O BOLETO -->
<input type="button" class="btn btn-warning" value="Gerar Boleto" onclick="imprimir()"> <br>

<div class="document">
	<div id = "carne" class="col-sm-6"></div>
</div>
<!-- ----------------------- -->
<script>		
	//document.write(`Sua soma foi ${dataEmprestimo}`)|date:"Y-m-d"}}+3"
			//FAÇA OS TESTES NUMA PAGINA COM BASE.HTML CARREGADO
			//EXEMPLO DE MOMENT
			//var d = moment().startOf("year") 			
			
	function imprimir(){	
			//VARIÁVEIS DA DATA DO EMPRESTIMO
			var contador_meses = 0
			var contador_anos  = 0
			var dataEmprestimo = "{{ object.data_emprestimo}}"		
			var dia
			var mes
			var ano
			var aux_dia = {{object.data_emprestimo.day}}
			var aux_mes = {{object.data_emprestimo.month}}
			var aux_ano = {{object.data_emprestimo.year}}

			//VARIÁVEIS DO EMPRESTIMO
			var aux_qtd_parccela = {{object.qtd_parcelas}}

			var data_emissao = "{{object.data_emprestimo|date:"d/m/Y"}}"

			var valor_da_parcela = parseFloat("{{object.valor_emprestado}}")		

			var valor_multa = parseFloat((valor_da_parcela*0.020))

			valor_multa = valor_multa.toFixed(2)
			
			var valor_juros_dia = (valor_da_parcela*0.0066).toFixed(2)

			var contador_parcela = 0
			
			//VARIÁVEIS DO CLIENTE
			var cliente_nome = "{{object.cliente}}"

			for (var i = 0 ; i < {{object.qtd_parcelas}}; i++){
			contador_meses++
			contador_parcela++

			dia  = aux_dia
			mes  = aux_mes+contador_meses
			ano  = aux_ano

			//AJUSTA A DATA QUANDO O MES É FEVEREIRO 
			if(dia == 30 && mes == 2){
				dia = 1 
				mes = 3
			}
			
			//AJUSTA MESES E ANOS 
			if(mes == 13){
				contador_meses = 0
				aux_mes = 1
				mes = 1	
				aux_ano++
				ano++				
			}	

			if ((i+1)%4 != 0){
			carne.innerHTML +=
				`
					<table cellspacing="0" cellpadding="0" border="1">
						<!--1º linha-->
						<tr>
							<td width="15%" >
								<span class="title" align="center">CREDCOOP</span>
								<br/>
								<span class="text">Tel: (84) 4141-3210 </span>
							</td>
							<td width="1px"></td>
							<td width="39%" colspan="6">
								<p class="content center"><b>CREDCOOP</b></p>							
								<p class="content center">(84) 4131-3210</p>						
							</td>						
						</tr>
						<!--2º linha-->
						<tr>					
							<td width="15%">							
								<span class="title">Vencimento</span>							
								<br/>						
								<p class="content right text">${dia}/${mes}/${ano}</p>	
															
							</td>
							<td width="1px" ></td>
							<td width="70%" colspan="5">
								<span class="title">&nbsp Local de Pagamento</span>	
								<br/>
								<p class="content left text">&nbsp Escritório</span></p>	
							</td>
							<td width="45%">
								<span class="title">Vencimento</span>
								<br/>				
								<p class="content right text">${dia}/${mes}/${ano}</p>
							
							</td>
						</tr>
						<!--3º linha-->
						<tr>
							<td width="15%">
								<span class="title">Valor do Documento</span>
								<br/>
								<p class="content center">R$ ${"{{object.valor_emprestado}}"}</p>
							</td>
							<td width="1px"></td>
							<td width="17%" colspan="5">
								<span class="title">&nbsp Nome do Cedente</span>
								<br/>
								<p class="content left">&nbsp CREDCOOP</p>
							</td>
							<td width="15%">
								<span class="title">Valor do Documento</span>
								<br/>
								<p class="content center">R$ ${"{{object.valor_emprestado}}"}</p>
							</td>
						</tr>
						<!--4º linha-->
						<tr>
							<td width="15%">							
								<br/>
								<p class="content center"><b>PARCELA: ${contador_parcela}/${aux_qtd_parccela}<b></p>
							</td>
							<td width="1px">
								<span class="title"></span>
								<br/>
								<p class="content center"></p>
							</td>
							<td width="50%" colspan="4">
								<span class="title">&nbsp Dt. Emissão: </span><br>							
								<p class="content left">&nbsp ${data_emissao}</p>
							</td>		
							<td>
								<span class="title"></span>
								<br/>
								<p class="content center"></p>
							</td>
							<td width="30%">
								<p class="content center"><b>PARCELA: ${contador_parcela}/${aux_qtd_parccela}<b></p>
							</td>
						</tr>	
						<!--5º linha-->			
						<tr>
						
							<td width="15%">
								<p class="content center">(-) Descontos </p><br>							
							</td>
							<td width="1px"></td>
							<td colspan="5" rowspan="4">
								<span class="titleisrael">&nbsp Instruções<br/>
								&nbsp MULTA DE R$: ${valor_multa} APÓS: ${dia}/${mes}/${ano}<br/>
								&nbsp JUROS DE R$: ${valor_juros_dia} AO DIA<br/>
								&nbsp NÃO RECEBER APÓS 30 DIAS DO VENCIMENTO<br/>
							
								</span>				
							</td>
							<td width="15%">
								<p class="content center">(-) Descontos </p><br>							
							</td>
						</tr>	
						<!--6º linha-->				
						<tr>
							<td width="15%">
								<p class="content center">(+) Acréscimos </p><br>							
							</td>
							<td width="1px"></td>
							<td width="15%">
								<p class="content center">(+) Acréscimos </p><br>							
							</td>
							
						</tr>
						<!--7º linha-->
						<tr>
							<td width="15%">
								<p class="content center">(=) Valor Pago </p><br>							
							</td>
							<td width="1px"></td>
							<td width="15%">
								<p class="content center">(=) Valor Pago </p><br>							
							</td>
						</tr>
						<!--8º linha-->
						<tr>
							<td width="15%">
								<span class="title">Visto do Operador</span>
								<br>
								<p class="content center">Pago em ___/___/___ </p>
								<br>
							</td>
							<td width="1px"></td>
							<td width="15%">
								<span class="title">Visto do Operador</span>
								<br>
								<p class="content center">Pago em ___/___/___ </p>
								<br>
							</td>
						</tr>
						<!--9º linha-->
						<tr>
							<td width="15%">
								<span class="title">Outros Acres.</span>
								<br/>
								<span class="text"></span>
							</td>
							<td width="1px"></td>
							<td width="39%" colspan="5">
								<span class="title">Sacado: ${cliente_nome} </span><br>
								<br/>
								<span class="text">Endereço:  </span><br>							
							</td>
							<td width="15%">
								<span class="title">Outros Acres.</span>
								<br/>
								<span class="text"></span>
							</td>
						</tr>
					</table><br>				
					`
				}
				else {
					carne.innerHTML += 
					`
					<table cellspacing="0" cellpadding="0" border="1">
						<!--1º linha-->
						<tr>
							<td width="15%" >
								<span class="title" align="center">CREDCOOP</span>
								<br/>
								<span class="text">Tel: (84) 4141-3210 </span>
							</td>
							<td width="1px"></td>
							<td width="39%" colspan="6">
								<p class="content center"><b>CREDCOOP</b></p>							
								<p class="content center">(84) 4131-3210</p>						
							</td>						
						</tr>
						<!--2º linha-->
						<tr>					
							<td width="15%">							
								<span class="title">Vencimento</span>							
								<br/>						
								<p class="content right text">${dia}/${mes}/${ano}</p>	
															
							</td>
							<td width="1px" ></td>
							<td width="70%" colspan="5">
								<span class="title">&nbsp Local de Pagamento</span>	
								<br/>
								<p class="content left text">&nbsp Escritório</span></p>	
							</td>
							<td width="45%">
								<span class="title">Vencimento</span>
								<br/>				
								<p class="content right text">${dia}/${mes}/${ano}</p>
							
							</td>
						</tr>
						<!--3º linha-->
						<tr>
							<td width="15%">
								<span class="title">Valor do Documento</span>
								<br/>
								<p class="content center">R$ ${"{{object.valor_emprestado}}"}</p>
							</td>
							<td width="1px"></td>
							<td width="17%" colspan="5">
								<span class="title">&nbsp Nome do Cedente</span>
								<br/>
								<p class="content left">&nbsp CREDCOOP</p>
							</td>
							<td width="15%">
								<span class="title">Valor do Documento</span>
								<br/>
								<p class="content center">R$ ${"{{object.valor_emprestado}}"}</p>
							</td>
						</tr>
						<!--4º linha-->
						<tr>
							<td width="15%">							
								<br/>
								<p class="content center"><b>PARCELA: ${contador_parcela}/${aux_qtd_parccela}<b></p>
							</td>
							<td width="1px">
								<span class="title"></span>
								<br/>
								<p class="content center"></p>
							</td>
							<td width="50%" colspan="4">
								<span class="title">&nbsp Dt. Emissão: </span><br>							
								<p class="content left">&nbsp ${data_emissao}</p>
							</td>		
							<td>
								<span class="title"></span>
								<br/>
								<p class="content center"></p>
							</td>
							<td width="30%">
								<p class="content center"><b>PARCELA: ${contador_parcela}/${aux_qtd_parccela}<b></p>
							</td>
						</tr>	
						<!--5º linha-->			
						<tr>
						
							<td width="15%">
								<p class="content center">(-) Descontos </p><br>							
							</td>
							<td width="1px"></td>
							<td colspan="5" rowspan="4">
								<span class="titleisrael">&nbsp Instruções<br/>
								&nbsp MULTA DE R$: ${valor_multa} APÓS: ${dia}/${mes}/${ano}<br/>
								&nbsp JUROS DE R$: ${valor_juros_dia} AO DIA<br/>
								&nbsp NÃO RECEBER APÓS 30 DIAS DO VENCIMENTO<br/>
							
								</span>				
							</td>
							<td width="15%">
								<p class="content center">(-) Descontos </p><br>							
							</td>
						</tr>	
						<!--6º linha-->				
						<tr>
							<td width="15%">
								<p class="content center">(+) Acréscimos </p><br>							
							</td>
							<td width="1px"></td>
							<td width="15%">
								<p class="content center">(+) Acréscimos </p><br>							
							</td>
							
						</tr>
						<!--7º linha-->
						<tr>
							<td width="15%">
								<p class="content center">(=) Valor Pago </p><br>							
							</td>
							<td width="1px"></td>
							<td width="15%">
								<p class="content center">(=) Valor Pago </p><br>							
							</td>
						</tr>
						<!--8º linha-->
						<tr>
							<td width="15%">
								<span class="title">Visto do Operador</span>
								<br>
								<p class="content center">Pago em ___/___/___ </p>
								<br>
							</td>
							<td width="1px"></td>
							<td width="15%">
								<span class="title">Visto do Operador</span>
								<br>
								<p class="content center">Pago em ___/___/___ </p>
								<br>
							</td>
						</tr>
						<!--9º linha-->
						<tr>
							<td width="15%">
								<span class="title">Outros Acres.</span>
								<br/>
								<span class="text"></span>
							</td>
							<td width="1px"></td>
							<td width="39%" colspan="5">
								<span class="title">Sacado: ${cliente_nome} </span><br>
								<br/>
								<span class="text">Endereço:  </span><br>							
							</td>
							<td width="15%">
								<span class="title">Outros Acres.</span>
								<br/>
								<span class="text"></span>
							</td>
						</tr>
					</table><br>				
					`
					+ `.</br>`
				
				}
			}			
		}

		
	</script>

	
</html>







